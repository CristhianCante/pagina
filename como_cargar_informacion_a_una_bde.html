<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo: Cómo Cargar Información a una Base de Datos Espacial - Guía de PostGIS Bogotá</title>
    <!-- Tailwind CSS para un diseño rápido y responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos para el contenido del artículo */
        .article-content h2 {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 800; /* extrabold */
            color: #1f2937; /* gray-800 */
            margin-top: 2.5rem; /* mt-10 */
            margin-bottom: 1rem; /* mb-4 */
            border-bottom: 2px solid #e5e7eb; /* border-gray-200 */
            padding-bottom: 0.5rem; /* pb-2 */
        }
        .article-content h3 {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* bold */
            color: #1f2937; /* gray-800 */
            margin-top: 2rem; /* mt-8 */
            margin-bottom: 1rem; /* mb-4 */
        }
        .article-content p, .article-content ul, .article-content ol {
            font-size: 1.125rem; /* text-lg */
            color: #374151; /* gray-700 */
            line-height: 1.75;
            margin-bottom: 1rem;
        }
        .article-content ul {
            list-style-type: disc;
            padding-left: 2rem;
        }
        .article-content a {
            color: #2563eb; /* blue-600 */
            text-decoration: none;
            transition: color 0.2s;
        }
        .article-content a:hover {
            color: #1d4ed8; /* blue-800 */
            text-decoration: underline;
        }
        .article-content code:not(.hljs) { /* Código inline */
            background-color: #e5e7eb;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: monospace;
            font-size: 0.9em;
        }
        .code-block-container {
            position: relative;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .copy-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: #4b5563;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s;
            border: 1px solid #6b7280;
        }
        .copy-button:hover {
            background-color: #374151;
        }
        .copy-button.copied {
            background-color: #16a34a; /* green-600 */
        }
    </style>
    <!-- Highlight.js para el resaltado de sintaxis SQL -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/sql.min.js"></script>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <!-- ===== NAVEGACIÓN DE VUELTA ===== -->
        <nav class="mb-6">
            <a href="index.html" class="text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200 text-lg">
                &larr; Volver a la página principal de la guía
            </a>
        </nav>

        <!-- ===== CABECERA DEL MÓDULO ===== -->
        <header class="mb-12">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-2">
                Guía Procedimental: Carga de Información a una Base de Datos Espacial
            </h1>
            <p class="text-xl text-gray-600">
                Aprendiendo a importar datos geográficos a PostGIS usando QGIS y herramientas nativas.
            </p>
        </header>

        <article class="bg-white p-6 sm:p-8 lg:p-12 rounded-xl shadow-md border border-gray-200 article-content">
            
            <h2>1. Contexto General</h2>
            <p>
                Las bases de datos espaciales son una extensión del modelo relacional tradicional que nos permiten almacenar, gestionar y analizar geometrías como puntos, líneas y polígonos. <strong>PostGIS</strong>, como extensión de <strong>PostgreSQL</strong>, convierte a este gestor en una potente plataforma geoespacial que cumple con los estándares del OGC (Open Geospatial Consortium).
            </p>
            <p>
                Para este ejercicio, obtendremos datos de la ciudad de Bogotá desde fuentes como <a href="https://mapas.bogota.gov.co/#" target="_blank" rel="noopener noreferrer" class="font-semibold">Mapas Bogotá</a>, incluyendo capas como Unidades de Planeamiento Local (UPL), sectores catastrales, incidentes de bomberos y la malla vial.
            </p>

            <h2>2. Método 1: Carga de Información a través de QGIS</h2>
            <p>
                Este método utiliza la interfaz gráfica de QGIS para conectarse a la base de datos e importar las capas de forma visual.
            </p>

            <h3>2.1. Preparación de la Base de Datos en pgAdmin</h3>
            <p>
                Antes de cargar datos, debemos asegurarnos de tener una base de datos lista.
            </p>
            <ol class="list-decimal list-inside space-y-2">
                <li>En pgAdmin, crea una nueva base de datos (ej. <code>engativa_db</code>).</li>
                <li>Una vez creada, haz clic derecho sobre ella, ve a <strong>Extensiones</strong> y crea una nueva extensión. Busca y selecciona <strong>postgis</strong> para habilitar las funcionalidades espaciales.</li>
            </ol>
             <img src="imagenes/como cargar información a una bde/imagen1.png" alt="[Imagen mostrando la creación de una base de datos y la activación de la extensión PostGIS en pgAdmin]" class="w-full max-w-3xl mx-auto my-4 rounded-lg shadow-md border">

            <h3>2.2. Conexión desde QGIS</h3>
            <p>
                Ahora, en QGIS, nos conectaremos a la base de datos que acabamos de preparar.
            </p>
            <ol class="list-decimal list-inside space-y-2">
                <li>Ve al <strong>Administrador de fuentes de datos</strong>, selecciona la pestaña de <strong>PostgreSQL</strong> y haz clic en <strong>"Nueva"</strong>.</li>
                <li>Rellena los detalles de la conexión: un nombre para la conexión, el host (normalmente <code>localhost</code>), el puerto (<code>5432</code> por defecto), el nombre de la base de datos, y tu usuario y contraseña de PostgreSQL.</li>
                <li>Haz clic en "Probar conexión" para asegurarte de que todo está correcto y luego guarda la conexión.</li>
            </ol>
            <img src="imagenes/como cargar información a una bde/imagen2.png" alt="[Imagen de la ventana de configuración de una nueva conexión a PostGIS en QGIS]" class="w-full max-w-xl mx-auto my-4 rounded-lg shadow-md border">

            <h3>2.3. Importación de Capas</h3>
            <ol class="list-decimal list-inside space-y-2">
                <li>Una vez establecida la conexión, ve al menú <strong>Base de datos &gt; Administrador de BBDD</strong>.</li>
                <li>Selecciona tu conexión a PostGIS y tu base de datos en el panel izquierdo.</li>
                <li>Haz clic en el botón <strong>"Importar capa/archivo..."</strong>.</li>
                <li>Selecciona la capa que deseas importar (por ejemplo, un Shapefile de barrios), asígnale un nombre a la tabla en la base de datos, verifica que el SRID sea el correcto y haz clic en "Aceptar".</li>
            </ol>
             <img src="imagenes/como cargar información a una bde/imagen3.png" alt="[Imagen del Administrador de BBDD en QGIS importando una capa a la base de datos]" class="w-full max-w-4xl mx-auto my-4 rounded-lg shadow-md border">
            <p>Repite este proceso para todas las capas que necesites cargar. Una vez finalizado, puedes ir a pgAdmin, refrescar tu base de datos, y verás las nuevas tablas espaciales listas para ser consultadas.</p>
            <img src="imagenes/como cargar información a una bde/imagen4.png" alt="[Imagen de pgAdmin mostrando las tablas importadas desde QGIS]" class="w-full max-w-lg mx-auto my-4 rounded-lg shadow-md border">

            <h2>3. Método 2: Carga Directa con la Herramienta de PostGIS</h2>
            <p>
                PostGIS incluye una herramienta gráfica muy útil llamada <strong>"PostGIS Bundle Shapefile and DBF Loader"</strong> que permite importar archivos Shapefile de forma masiva y directa.
            </p>
            <ol class="list-decimal list-inside space-y-2">
                <li>Busca y abre la aplicación "PostGIS Bundle ... Shapefile Loader" en tu sistema operativo.</li>
                <li>Haz clic en <strong>"View connection details"</strong> y proporciona los datos de conexión a tu base de datos (usuario, contraseña, host, puerto y nombre de la base de datos).</li>
                <img src="imagenes/como cargar información a una bde/imagen5.png" alt="[Imagen de la ventana de conexión del PostGIS Shapefile Loader]" class="w-full max-w-md mx-auto my-4 rounded-lg shadow-md border">
                <li>Haz clic en <strong>"Add File"</strong> y selecciona todos los archivos Shapefile que deseas importar.</li>
                <li>En la lista, puedes configurar el esquema, el nombre de la tabla y, muy importante, el <strong>SRID</strong> para cada capa. Asegúrate de que todas las capas tengan un SRID coherente.</li>
                <li>Finalmente, haz clic en <strong>"Import"</strong>. La herramienta procesará todos los archivos y los cargará en tu base de datos.</li>
            </ol>
            <img src="imagenes/como cargar información a una bde/imagen6.png" alt="[Imagen de la interfaz del PostGIS Shapefile Loader con una lista de archivos listos para ser importados]" class="w-full max-w-4xl mx-auto my-4 rounded-lg shadow-md border">
            <p>Este método es extremadamente rápido y eficiente, especialmente cuando tienes que cargar una gran cantidad de archivos Shapefile.</p>

        </article>
        
        <!-- ===== PIE DE PÁGINA ===== -->
        <footer class="text-center mt-16 pt-8 border-t border-gray-300">
            <p class="text-gray-600">&copy; 2025 Universidad Distrital Francisco José de Caldas. Todos los derechos reservados.</p>
            <p class="text-sm text-gray-500 mt-1">Este material se distribuye bajo la licencia Creative Commons Atribución-CompartirIgual.</p>
        </footer>
    </div>
    <script>
        // Inicializa Highlight.js para resaltar todos los bloques de código
        hljs.highlightAll();

        // Agrega la funcionalidad de copiado a todos los botones
        const copyButtons = document.querySelectorAll('.copy-button');
        copyButtons.forEach(button => {
            button.addEventListener('click', () => {
                const pre = button.parentElement.querySelector('pre > code');
                const textToCopy = pre.innerText;

                // Usamos un textarea temporal para copiar el texto
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    button.innerText = 'Copiado!';
                    button.classList.add('copied');
                } catch (err) {
                    console.error('Error al copiar el texto: ', err);
                    button.innerText = 'Error';
                }
                document.body.removeChild(textArea);

                // Revertir el texto del botón después de 2 segundos
                setTimeout(() => {
                    button.innerText = 'Copiar';
                    button.classList.remove('copied');
                }, 2000);
            });
        });
    </script>
</body>
</html>
