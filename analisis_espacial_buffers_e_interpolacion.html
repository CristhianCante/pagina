<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo: Análisis Espacial (Buffers e Interpolación) - Guía de PostGIS Bogotá</title>
    <!-- Tailwind CSS para un diseño rápido y responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos para el contenido del artículo */
        .article-content h2 {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 800; /* extrabold */
            color: #1f2937; /* gray-800 */
            margin-top: 2.5rem; /* mt-10 */
            margin-bottom: 1rem; /* mb-4 */
            border-bottom: 2px solid #e5e7eb; /* border-gray-200 */
            padding-bottom: 0.5rem; /* pb-2 */
        }
        .article-content h3 {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* bold */
            color: #1f2937; /* gray-800 */
            margin-top: 2rem; /* mt-8 */
            margin-bottom: 1rem; /* mb-4 */
        }
        .article-content p, .article-content ul, .article-content ol {
            font-size: 1.125rem; /* text-lg */
            color: #374151; /* gray-700 */
            line-height: 1.75;
            margin-bottom: 1rem;
        }
        .article-content ul {
            list-style-type: disc;
            padding-left: 2rem;
        }
        .article-content a {
            color: #2563eb; /* blue-600 */
            text-decoration: none;
            transition: color 0.2s;
        }
        .article-content a:hover {
            color: #1d4ed8; /* blue-800 */
            text-decoration: underline;
        }
        .article-content code:not(.hljs) { /* Código inline */
            background-color: #e5e7eb;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: monospace;
            font-size: 0.9em;
        }
        .code-block-container {
            position: relative;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .copy-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: #4b5563;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s;
            border: 1px solid #6b7280;
        }
        .copy-button:hover {
            background-color: #374151;
        }
        .copy-button.copied {
            background-color: #16a34a; /* green-600 */
        }
        .styled-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
        .styled-table th, .styled-table td {
            border: 1px solid #d1d5db;
            padding: 0.75rem;
            text-align: left;
        }
        .styled-table th {
            background-color: #f3f4f6;
            font-weight: 600;
        }
        .styled-table tbody tr:nth-child(odd) {
            background-color: #f9fafb;
        }
    </style>
    <!-- Highlight.js para el resaltado de sintaxis SQL -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <!-- ===== NAVEGACIÓN DE VUELTA ===== -->
        <nav class="mb-6">
            <a href="index.html" class="text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200 text-lg">
                &larr; Volver a la página principal de la guía
            </a>
        </nav>

        <!-- ===== CABECERA DEL MÓDULO ===== -->
        <header class="mb-12">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-2">
                Análisis Espacial: Buffers e Interpolación
            </h1>
            <p class="text-xl text-gray-600">
                Creando zonas de influencia y estimando valores en el espacio.
            </p>
        </header>

        <article class="bg-white p-6 sm:p-8 lg:p-12 rounded-xl shadow-md border border-gray-200 article-content">
            
            <h2>1. Introducción al Análisis Espacial</h2>
            <p>
                El <strong>análisis espacial</strong> consiste en estudiar las relaciones, patrones y tendencias que ocurren entre objetos y fenómenos localizados en el espacio. En esencia, se trata de responder preguntas como: ¿qué ocurre?, ¿dónde ocurre? y ¿por qué ocurre en ese lugar específico? Este tipo de análisis nos permite generar nueva información y conocimiento para la toma de decisiones complejas desde nuevas perspectivas.
            </p>

            <h2>2. Análisis Espacial Vectorial: Buffers</h2>
            <p>
                Los <strong>buffers</strong> (o zonas de influencia) son una de las herramientas de análisis espacial más fundamentales. Definen un área alrededor de un objeto geográfico a una distancia específica. Son esenciales en planificación urbana, gestión ambiental, logística y muchos otros campos.
            </p>
            <img src="imagenes/analisis espacial de buffers e interpolacion/imagen1.png" alt="[Diagrama mostrando zonas de buffer alrededor de puntos, líneas y polígonos]" class="w-full max-w-4xl mx-auto my-4 rounded-lg shadow-md border">
            <p>
                Existen diferentes tipos de buffers según la necesidad del análisis, como buffers múltiples (con varios anillos de distancia), con bordes disueltos o intactos, y buffers interiores o exteriores a un polígono.
            </p>
            
            <h3>2.1. Caso Práctico: Accesibilidad a Centros Comerciales en Engativá</h3>
            <p><strong>Objetivo:</strong> Identificar cuántas paradas del SITP se encuentran a una distancia peatonal razonable (200, 400, 600 y 800 metros) de los centros comerciales más representativos de Engativá.</p>
            <p><strong>Método:</strong> Se generará un buffer múltiple alrededor de cada centro comercial y luego se realizará un conteo de las paradas que caen dentro de cada anillo de influencia. A continuación se muestra cómo se podría automatizar este proceso con PyQGIS.</p>

            <p><strong>Paso 1: Cargar y reproyectar las capas</strong></p>
            <div class="code-block-container">
                <button class="copy-button">Copiar</button>
                <pre><code class="language-python"># Este es un ejemplo conceptual de cómo se haría en PyQGIS
import processing

# Suponiendo que 'cc' y 'paradas' son las capas ya cargadas
# Es crucial reproyectar a un sistema en metros para que el buffer funcione correctamente
cc_repro = processing.run("native:reprojectlayer", {
    'INPUT': cc,
    'TARGET_CRS': 'EPSG:9377', # Origen Nacional
    'OUTPUT': 'memory:cc_reproyectado'
})['OUTPUT']

paradas_repro = processing.run("native:reprojectlayer", {
    'INPUT': paradas,
    'TARGET_CRS': 'EPSG:9377',
    'OUTPUT': 'memory:paradas_reproyectadas'
})['OUTPUT']</code></pre>
            </div>

            <p><strong>Paso 2: Crear los buffers múltiples</strong></p>
            <div class="code-block-container">
                <button class="copy-button">Copiar</button>
                <pre><code class="language-python">distancias = [200, 400, 600, 800]
buffers_por_distancia = []

for d in distancias:
    buffer = processing.run("native:buffer", {
        'INPUT': cc_repro,
        'DISTANCE': d,
        'SEGMENTS': 10,
        'DISSOLVE': False,
        'OUTPUT': f'memory:buffer_{d}m'
    })['OUTPUT']
    buffers_por_distancia.append(buffer)

# Unir todos los buffers en una sola capa
buffer_multiples = processing.run("native:mergevectorlayers", {
    'LAYERS': buffers_por_distancia,
    'OUTPUT': 'memory:buffer_multiple'
})['OUTPUT']
QgsProject.instance().addMapLayer(buffer_multiples)</code></pre>
            </div>
             <img src="imagenes/analisis espacial de buffers e interpolacion/imagen2.png" alt="[Mapa de Engativá mostrando los centros comerciales con anillos de buffer múltiples y los puntos de las paradas del SITP]" class="w-full max-w-2xl mx-auto my-4 rounded-lg shadow-md border">
            <p>El análisis final, contando las paradas dentro de cada buffer, revela que los centros comerciales en Engativá tienen una excelente accesibilidad al transporte público, con algunos teniendo más de 50 paradas en un radio de 800 metros.</p>

            <h2>3. Análisis Espacial: Interpolación</h2>
            <p>
                La <strong>interpolación</strong> es un proceso que nos permite estimar valores en lugares donde no tenemos mediciones, basándonos en los valores de puntos cercanos que sí conocemos. El resultado es una superficie continua (un ráster) que predice cómo se distribuye una variable en el espacio.
            </p>
            <p>Existen varios métodos de interpolación, siendo los más comunes:</p>
            <ul>
                <li><strong>Distancia Inversa Ponderada (IDW):</strong> Asigna más peso a los puntos cercanos que a los lejanos. Es simple de aplicar y genera superficies suaves.</li>
                <li><strong>Redes Irregulares Trianguladas (TIN):</strong> Crea una superficie formada por triángulos que conectan los puntos de muestra. Es muy útil para modelar terrenos y superficies con cambios bruscos.</li>
            </ul>
            <img src="imagenes/analisis espacial de buffers e interpolacion/imagen3.png" alt="[Diagrama comparando la triangulación de Delaunay para TIN y un modelo de elevación digital resultante]" class="w-full max-w-3xl mx-auto my-4 rounded-lg shadow-md border">

            <h3>3.1. Caso Práctico: Concentración de Robos en Engativá</h3>
            <p><strong>Objetivo:</strong> Identificar los "puntos calientes" o zonas de mayor concentración de robos en la localidad de Engativá durante el año 2020.</p>
            <p><strong>Método:</strong> Se utilizará la interpolación IDW de QGIS a partir de los puntos que representan cada incidente de robo para generar un mapa de calor que muestre las áreas con mayor densidad de eventos.</p>
            <img src="imagenes/analisis espacial de buffers e interpolacion/imagen5.png" alt="[Imagen de la herramienta interpolación IDW de QGIS]" class="w-full max-w-3xl mx-auto my-4 rounded-lg shadow-md border">
            <p>
                El resultado del análisis de interpolación muestra que los barrios con mayor concentración de incidentes fueron La Estrada, Marandú y Ciudadela Colsubsidio. Esta información es vital para que las autoridades puedan enfocar sus estrategias de seguridad en las áreas más críticas.
            </p>
            <img src="imagenes/analisis espacial de buffers e interpolacion/imagen4.png" alt="[Mapa de calor mostrando la interpolación de incidentes de robo en Engativá, con colores que van de azul (baja concentración) a rojo (alta concentración)]" class="w-full max-w-3xl mx-auto my-4 rounded-lg shadow-md border">
        </article>
        
        <!-- ===== PIE DE PÁGINA ===== -->
        <footer class="text-center mt-16 pt-8 border-t border-gray-300">
            <p class="text-gray-600">&copy; 2025 Universidad Distrital Francisco José de Caldas. Todos los derechos reservados.</p>
            <p class="text-sm text-gray-500 mt-1">Este material se distribuye bajo la licencia Creative Commons Atribución-CompartirIgual.</p>
        </footer>
    </div>
    <script>
        // Inicializa Highlight.js para resaltar todos los bloques de código
        hljs.highlightAll();

        // Agrega la funcionalidad de copiado a todos los botones
        const copyButtons = document.querySelectorAll('.copy-button');
        copyButtons.forEach(button => {
            button.addEventListener('click', () => {
                const pre = button.parentElement.querySelector('pre > code');
                const textToCopy = pre.innerText;

                // Usamos un textarea temporal para copiar el texto
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    button.innerText = 'Copiado!';
                    button.classList.add('copied');
                } catch (err) {
                    console.error('Error al copiar el texto: ', err);
                    button.innerText = 'Error';
                }
                document.body.removeChild(textArea);

                // Revertir el texto del botón después de 2 segundos
                setTimeout(() => {
                    button.innerText = 'Copiar';
                    button.classList.remove('copied');
                }, 2000);
            });
        });
    </script>
</body>
</html>
